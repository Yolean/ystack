#!/usr/bin/env y-bin-download

# This yaml format has special requirements as it must be parsed on vanilla osx and linux:
# - version must be the first key per binary name
# - comments must be separate lines, not after values


# NOTE yq must be first in the file because this script depends on it
yq:
  version: 4.40.3
  sha256:
    darwin_amd64: 9485a61ad689b8acd25026cfd9a063a3a3d66b8d94df53de83a77fb5d9001186
    darwin_arm64: f8740da8c09a255de98fb122779755f3f41b85afd8c953dc7ee1bde40a87e28c
    linux_amd64: 6e9a5ed9591dbf1d13aaec4efaaf0ecdaf4945ea393b9ce01f4c3dea22311470
    linux_arm64: 44a5cca10d33019b8a46212882197be4f961dfe7deddde0af497065aa980a6a4
  templates:
    download: https://github.com/mikefarah/yq/releases/download/v${version}/yq_${os}_${arch}
    # Must be parsed based on: https://github.com/mikefarah/yq/releases/download/v${version}/checksums_hashes_order
    # sha256: https://github.com/mikefarah/yq/releases/download/v${version}/checksums

jq:
  version: 1.6
  templates:
    # current release has no darwin-arm64 builds, let's rely on rosetta 2 (which we need for docker anyway)
    #download: https://github.com/stedolan/jq/releases/download/jq-${version}/jq-${osx}-${arch}
    download: https://github.com/stedolan/jq/releases/download/jq-${version}/jq-${osx}-amd64
  sha256:
    darwin_arm64: 5c0a0a3ea600f302ee458b30317425dd9632d1ad8882259fcaf4e9b868b2b1ef
    darwin_amd64: 5c0a0a3ea600f302ee458b30317425dd9632d1ad8882259fcaf4e9b868b2b1ef
    linux_amd64: 0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5
    linux_arm64: For_jq_arm64_linux_use_a_package_manager

kubectl:
  version: 1.27.8
  templates:
    download: https://dl.k8s.io/v${version}/kubernetes-client-${os}-${arch}.tar.gz
  sha256:
    darwin_amd64: 656797184727cab8cf5088ad938f51f7474999bf48abe9725ac35534d6804852
    darwin_arm64: c18e498c7a269fbe28f6ed83878d424d412c8fa1eb2e4bde34e3279ce5304952
    linux_amd64: aa20557d58d4c7144d928a734fef3303a2069c599f1d6742abc918e0ac607685
    linux_arm64: 574383a0c43406f3e251b2d85277acafd27a18f813e64fa0da75e86db8a8423e
  archive:
    tool: tar
    path: kubernetes/client/bin/kubectl

kustomize:
  # TODO with tag from version in ./y-kubectl
  # https://github.com/kubernetes/kubernetes/blob/v1.27.5/staging/src/k8s.io/kubectl/go.mod#L44
  # - 5.1.0 changes so that "Components are now applied after generators" which means that kubectl -k and kustomize build would behave differently
  version: 5.0.3
  templates:
    download: https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv${version}/kustomize_v${version}_${os}_${arch}.tar.gz
    sha256: https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv${version}/checksums.txt
  sha256:
    darwin_amd64: a3300ccc81ed8e7df415f3537b49e70d89f985a28c9ade8a885ebf6f1689b4e0
    darwin_arm64: ecb15ba64356507f8c73796acbe79b445c17f637963b05be72a905c05f6abfc1
    linux_amd64: c627b1575c3fecbc7ad1c181c23a7adcacf19732dab627eb57e89a7bc4c1e929
    linux_arm64: c92e9b4ad3ccd10077566eddddfc58748aa19ccc2b0fe17600fd57f6472b8bfe
  archive:
    tool: tar
    path: kustomize

skaffold:
  version: 2.9.0
  templates:
    download: https://storage.googleapis.com/skaffold/releases/v${version}/skaffold-${os}-${arch}
    sha256: https://storage.googleapis.com/skaffold/releases/v${version}/skaffold-${os}-${arch}.sha256
  sha256:
    darwin_amd64: 715d3073365e5fa8b8c52789185fcc79dcb67adb65136986f7c588a94d41d89d
    darwin_arm64: e503bf6d109787bd61f0f81118c007775d941f0e74f28debbb477cb70b8746a0
    linux_amd64: 7eed2d7fe4c1a53f385d0b24c50fc08941a09ac37b44705ad7997a6635c27e84
    linux_arm64: 2655f412582c1b0e84f6822c273b8d8d14df427598fd760a6311ed1280942051

helm:
  version: 3.12.3
  templates:
    download: https://get.helm.sh/helm-v${version}-${os}-${arch}.tar.gz
    sha256: https://get.helm.sh/helm-v${version}-${os}-${arch}.tar.gz.sha256sum
  sha256:
    darwin_amd64: 1bdbbeec5a12dd0c1cd4efd8948a156d33e1e2f51140e2a51e1e5e7b11b81d47
    darwin_arm64: 240b0a7da9cae208000eff3d3fb95e0fa1f4903d95be62c3f276f7630b12dae1
    linux_amd64: 1b2313cd198d45eab00cc37c38f6b1ca0a948ba279c29e322bdf426d406129b5
    linux_arm64: 79ef06935fb47e432c0c91bdefd140e5b543ec46376007ca14a52e5ed3023088
  archive:
    tool: tar
    path: ${os}-${arch}/helm

buildctl:
  version: 0.12.4
  templates:
    download: https://github.com/moby/buildkit/releases/download/v${version}/buildkit-v${version}.${os}-${arch}.tar.gz
  sha256:
    darwin_amd64: 57d5d4e6075842dac8bf6cc86a792242678a16860172a2da91a7fcb8aad93d7a
    darwin_arm64: 3c3c36dcb07063fef1c8b52faeb22bfd28f9f5dd1cf141b56d18073f8127de77
    linux_amd64: 75ffe406e4284b77af35447d829767cfa935eb7dd2ea2e3407223d6885bd8ebd
    linux_arm64: 9166eeaff11721122b9398d6385c7b73d6e4df86797e537c16ac6b6d05eab899
  archive:
    tool: tar
    #path: $(test 'linux' = $os && echo "bin/buildctl" || echo "buildctl")
    path: bin/buildctl

crane:
  version: 0.17.0
  templates:
    download: https://github.com/google/go-containerregistry/releases/download/v${version}/go-containerregistry_${Os}_${xarch}.tar.gz
    sha256: https://github.com/google/go-containerregistry/releases/download/v${version}/checksums.txt
  sha256:
    darwin_amd64: c886aaa8bb91d910f51b71ec718ba49349f6ff09fce0201e73ea7a958340e056
    darwin_arm64: a5833f0e1d02d299d3ef572fd1ffaa160644eb995ae4dbaf8bc80415d1159e8a
    linux_amd64: 1b4d3ee1e214776bd74b88741ccf1b070e8ed5660056f05af632a1a399fe21c6
    linux_arm64: 2474d5602a262f1331d895558e7072377f3f8935faab61c1b45c1ea870f417a7
  archive:
    tool: tar
    path: crane

esbuild:
  version: 0.19.8
  templates:
    download: https://registry.npmjs.org/@esbuild/${os}-${xarm}64/-/${os}-${xarm}64-${version}.tgz
  sha256:
    darwin_amd64: 48c557a9f55fcb76dedf591ff67c740d167d73868dd86648d9345d3e3edac509
    darwin_arm64: 241b40ef4f3960b4fc3bc8eba5e32b016482271174ddd795755634abef69945a
    linux_amd64: 18df8ac2e24972a6fc4deb2a77782e90edba04ab6d621ae52d22deb3430d41d7
    linux_arm64: f845f20f9ecb7482733c378a4edc85f1d00b470a643c0ff604af623a9fa165cc
  archive:
    tool: tar
    path: package/bin/esbuild

turbo:
  version: 1.11.0
  templates:
    download: https://registry.npmjs.org/turbo-${os}-${arm}64/-/turbo-${os}-${arm}64-${version}.tgz
  sha256:
    darwin_amd64: cd17946b3708830bb2b049e7c3f3dc4dba00ef89c7f6771018eedf782ea1e974
    darwin_arm64: bf6f3c5ab5c1b6161e931eb481e21068e73e2a0bba3135ee817df2b59272c67f
    linux_amd64: 8f9d5a852f70ac485429c4a51b5fbea1794821d04f0e4287cdeb72cbeb226f53
    linux_arm64: 13753862002506fdbda099f1450bde12a84d8dd587a30d27cffac3c073c234eb
  archive:
    tool: tar
    path: turbo-${os}-${arm}64/bin/turbo
